[build]
builder = "nixpacks"
buildCommand = "yarn install && yarn build"

[deploy]
startCommand = "yarn start"
healthcheckPath = "/health"
healthcheckTimeout = 100
restartPolicyType = "on_failure"
restartPolicyMaxRetries = 3

[deploy.env]
NODE_ENV = "production"
PORT = "54367"
OPENAI_API_KEY = { from = "OPENAI_API_KEY" }
ANTHROPIC_API_KEY = { from = "ANTHROPIC_API_KEY" }
GOOGLE_API_KEY = { from = "GOOGLE_API_KEY" }
GROQ_API_KEY = { from = "GROQ_API_KEY" }
FIREWORKS_API_KEY = { from = "FIREWORKS_API_KEY" }
NEXT_PUBLIC_SUPABASE_URL = { from = "SUPABASE_URL" }
SUPABASE_SERVICE_ROLE = { from = "SUPABASE_SERVICE_ROLE" } 